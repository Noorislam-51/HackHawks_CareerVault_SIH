<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocuVault - John Doe</title>
  <link rel="stylesheet" href="/stylesheets/studentDashboard.css">
</head>

<body>
  <div class="container">


    <div class="profile-container">
      <!-- Header with gradient background -->
      <div class="profile-header">
        <button class="edit-details-btn" onclick="openEditModal()">
          📝 Edit Details
        </button>
      </div>

      <!-- Profile Content -->
      <div class="profile-content">
        <!-- Profile Top Section -->
        <div class="profile-top">
          <div class="avatar" id="avatar">JD</div>
          <div class="profile-info">
            <h1 class="profile-name" id="profile-name">
              <%= student.basicDetails.fullName %>
            </h1>
            <div class="profile-meta">
              <span># Roll No: <span id="profile-roll">
                  <%= student.studentId %>
                </span></span>
              <span>👁️ <span id="profile-college">
                  <%= student.collegeId%>
                </span></span>
            </div>
          </div>
        </div>

        <!-- Profile Details Grid -->
        <div class="profile-details">
          <!-- Left Column -->
          <div class="details-left">
            <div class="detail-item">
              <div class="detail-icon">🎓</div>
              <div class="detail-content">
                <div class="detail-label">Course</div>
                <div class="detail-value" id="profile-course">
                  <%= student.basicDetails.course %>
                </div>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">📅</div>
              <div class="detail-content">
                <div class="detail-label">Year</div>
                <div class="detail-value" id="profile-year">
                  <%= student.basicDetails.year %>
                </div>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">📅</div>
              <div class="detail-content">
                <div class="detail-label">Date of Birth</div>
                <div class="detail-value" id="profile-dob">
                  <%= student.basicDetails.dob %>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="details-right">
            <div class="detail-item">
              <div class="detail-icon">✉️</div>
              <div class="detail-content">
                <div class="detail-label">Email</div>
                <div class="detail-value" id="profile-email">
                  <%= student.email %>
                </div>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">📞</div>
              <div class="detail-content">
                <div class="detail-label">Contact</div>
                <div class="detail-value" id="profile-contact">
                  <%= student.contactNumber%>
                </div>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">📍</div>
              <div class="detail-content">
                <div class="detail-label">Address</div>
                <div class="detail-value" id="profile-address">
                  <%= student.basicDetails.address %>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Skills Section -->
        <div class="skills-section">
          <h3 class="skills-title">Skills</h3>
          <div class="skills-container" id="profile-skills">
            <span class="skill-tag skill-javascript">JavaScript</span>
            <span class="skill-tag skill-react">React</span>
            <span class="skill-tag skill-python">Python</span>
            <span class="skill-tag skill-ml">Machine Learning</span>
            <span class="skill-tag skill-nodejs">Node.js</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn btn-primary">
            📄 Resume Builder
          </button>
          <button class="btn btn-secondary">
            ⬇️ Download Resume
          </button>
        </div>
      </div>
    </div>




        </form>


      </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="tabs">
      <a href="#" class="tab active">📄 Documents</a>
      <a href="#" class="tab">🏢 Internships</a>
      <a href="#" class="tab">📅 Attendance</a>
      <a href="#" class="tab">📊 Marksheet</a>
      <a href="#" class="tab">👥 Community</a>
    </div>


    <!-- Document Management Section -->
    <%- include("../partials/uploadDocument") %>

      <script>

        // Modal functions
        function openEditModal() {
          document.getElementById('editModal').style.display = 'block';
        }

        function closeEditModal() {
          document.getElementById('editModal').style.display = 'none';
        }

        // Close modal when clicking outside
        document.getElementById('editModal').addEventListener('click', function (e) {
          if (e.target === this) {
            closeEditModal();
          }
        });

        // Add skill function
        function addSkill() {
          const skillInput = document.getElementById('skill-input');
          const skillValue = skillInput.value.trim();

          if (skillValue) {
            const modalSkills = document.getElementById('modal-skills');
            const skillTag = document.createElement('div');
            skillTag.className = 'modal-skill-tag';
            skillTag.innerHTML = `
          ${skillValue} <button type="button" class="remove-skill" onclick="removeSkill(this)">×</button>
        `;
            modalSkills.appendChild(skillTag);
            skillInput.value = '';
          }
        }

        // Remove skill function
        function removeSkill(button) {
          button.parentElement.remove();
        }

        // Allow Enter key to add skill
        document.getElementById('skill-input').addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            addSkill();
          }
        });

        // Save changes function
        function saveChanges() {
          const name = document.getElementById('edit-name').value;
          const roll = document.getElementById('edit-roll').value;
          const course = document.getElementById('edit-course').value;
          const year = document.getElementById('edit-year').value;
          const email = document.getElementById('edit-email').value;

          // Update profile information
          document.getElementById('profile-name').textContent = name;
          document.getElementById('profile-roll').textContent = roll;
          document.getElementById('profile-course').textContent = course;
          document.getElementById('profile-year').textContent = year;
          document.getElementById('profile-email').textContent = email;

          // Update avatar
          const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();
          document.getElementById('avatar').textContent = initials;

          // Update skills
          const modalSkills = document.querySelectorAll('#modal-skills .modal-skill-tag');
          const profileSkills = document.getElementById('profile-skills');
          profileSkills.innerHTML = '';

          modalSkills.forEach(skill => {
            const skillName = skill.textContent.replace('×', '').trim();
            const skillTag = document.createElement('span');
            skillTag.className = 'skill-tag';
            skillTag.textContent = skillName;
            profileSkills.appendChild(skillTag);
          });

          closeEditModal();
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
          tab.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
          });
        });

        // Button handlers
        document.querySelectorAll('.add-doc-btn').forEach(btn => {
          btn.addEventListener('click', () => alert('Add document clicked'));
        });

        document.querySelector('.btn-primary').addEventListener('click', () => alert('Resume builder clicked'));
        document.querySelector('.btn-secondary').addEventListener('click', () => alert('Download resume clicked'));
      </script>
</body>

</html>